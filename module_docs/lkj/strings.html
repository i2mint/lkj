

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>lkj.strings &mdash; lkj 0.1.37 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=b8ecee75"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="lkj.misc" href="misc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            lkj
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../lkj.html">lkj</a></li>
<li class="toctree-l1"><a class="reference internal" href="chunking.html">lkj.chunking</a></li>
<li class="toctree-l1"><a class="reference internal" href="dicts.html">lkj.dicts</a></li>
<li class="toctree-l1"><a class="reference internal" href="filesys.html">lkj.filesys</a></li>
<li class="toctree-l1"><a class="reference internal" href="funcs.html">lkj.funcs</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing.html">lkj.importing</a></li>
<li class="toctree-l1"><a class="reference internal" href="iterables.html">lkj.iterables</a></li>
<li class="toctree-l1"><a class="reference internal" href="loggers.html">lkj.loggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">lkj.misc</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">lkj.strings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lkj.strings.FindReplaceTool"><code class="docutils literal notranslate"><span class="pre">FindReplaceTool</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lkj.strings.FindReplaceTool.analyze"><code class="docutils literal notranslate"><span class="pre">FindReplaceTool.analyze()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lkj.strings.FindReplaceTool.find_and_print_matches"><code class="docutils literal notranslate"><span class="pre">FindReplaceTool.find_and_print_matches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lkj.strings.FindReplaceTool.find_and_replace"><code class="docutils literal notranslate"><span class="pre">FindReplaceTool.find_and_replace()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lkj.strings.FindReplaceTool.get_modified_text"><code class="docutils literal notranslate"><span class="pre">FindReplaceTool.get_modified_text()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lkj.strings.FindReplaceTool.get_original_text"><code class="docutils literal notranslate"><span class="pre">FindReplaceTool.get_original_text()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lkj.strings.FindReplaceTool.replace_all"><code class="docutils literal notranslate"><span class="pre">FindReplaceTool.replace_all()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lkj.strings.FindReplaceTool.replace_one"><code class="docutils literal notranslate"><span class="pre">FindReplaceTool.replace_one()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lkj.strings.FindReplaceTool.revert"><code class="docutils literal notranslate"><span class="pre">FindReplaceTool.revert()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lkj.strings.FindReplaceTool.view_matches"><code class="docutils literal notranslate"><span class="pre">FindReplaceTool.view_matches()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lkj.strings.camel_to_snake"><code class="docutils literal notranslate"><span class="pre">camel_to_snake()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lkj.strings.fields_of_string_formats"><code class="docutils literal notranslate"><span class="pre">fields_of_string_formats()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lkj.strings.indent_lines"><code class="docutils literal notranslate"><span class="pre">indent_lines()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lkj.strings.most_common_indent"><code class="docutils literal notranslate"><span class="pre">most_common_indent()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lkj.strings.regex_based_substitution"><code class="docutils literal notranslate"><span class="pre">regex_based_substitution()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lkj.strings.snake_to_camel"><code class="docutils literal notranslate"><span class="pre">snake_to_camel()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lkj.strings.truncate_lines"><code class="docutils literal notranslate"><span class="pre">truncate_lines()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lkj.strings.truncate_string"><code class="docutils literal notranslate"><span class="pre">truncate_string()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lkj.strings.truncate_string_with_marker"><code class="docutils literal notranslate"><span class="pre">truncate_string_with_marker()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lkj.strings.unique_affixes"><code class="docutils literal notranslate"><span class="pre">unique_affixes()</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">lkj</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">lkj.strings</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/module_docs/lkj/strings.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-lkj.strings">
<span id="lkj-strings"></span><h1>lkj.strings<a class="headerlink" href="#module-lkj.strings" title="Link to this heading"></a></h1>
<p>Utils for strings</p>
<dl class="py class">
<dt class="sig sig-object py" id="lkj.strings.FindReplaceTool">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lkj.strings.</span></span><span class="sig-name descname"><span class="pre">FindReplaceTool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_line_numbers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highlight_char</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'^'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lkj/strings.html#FindReplaceTool"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.FindReplaceTool" title="Link to this definition"></a></dt>
<dd><p>A general-purpose find-and-replace tool that can treat the input text
as a continuous sequence of characters, even if operations such as viewing
context are performed line by line. The tool can analyze matches based on
a user-supplied regular expression, navigate through the matches with context,
and perform replacements either interactively or in bulk. Replacements can be
provided as either a static string or via a callback function that receives details
of the match.</p>
<p>Instead of keeping a single modified text, this version maintains a history of
text versions in self._text_versions, where self._text_versions[0] is the original
text and self._text_versions[-1] is the current text. Each edit is performed on the
current version and appended to the history. Additional methods allow reverting changes.</p>
<section id="basic-usage">
<h2>1: Basic usage<a class="headerlink" href="#basic-usage" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FindReplaceTool</span><span class="p">(</span><span class="s2">&quot;apple banana apple&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_and_print_matches</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;apple&#39;</span><span class="p">)</span>
<span class="go">Match 0 (around line 1):</span>
<span class="go">apple banana apple</span>
<span class="go">^^^^^</span>
<span class="go">----------------------------------------</span>
<span class="go">Match 1 (around line 1):</span>
<span class="go">apple banana apple</span>
<span class="go">             ^^^^^</span>
<span class="go">----------------------------------------</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FindReplaceTool</span><span class="p">(</span><span class="s2">&quot;apple banana apple&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_and_replace</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">)</span>
<span class="go">&#39;orange banana orange&#39;</span>
</pre></div>
</div>
</section>
<section id="using-line-mode-true-with-a-static-replacement">
<h2>2: Using line_mode=True with a static replacement.<a class="headerlink" href="#using-line-mode-true-with-a-static-replacement" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">text1</span> <span class="o">=</span> <span class="s2">&quot;apple</span><span class="se">\n</span><span class="s2">banana apple</span><span class="se">\n</span><span class="s2">cherry&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tool</span> <span class="o">=</span> <span class="n">FindReplaceTool</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">line_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Find all occurrences of &quot;apple&quot; (two in total).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">tool</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;apple&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">tool</span><span class="o">.</span><span class="n">_matches</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Replace the first occurrence (&quot;apple&quot; on the first line) with &quot;orange&quot;.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tool</span><span class="o">.</span><span class="n">replace_one</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_modified_text</span><span class="p">()</span>
<span class="go">&#39;orange\nbanana apple\ncherry&#39;</span>
</pre></div>
</div>
</section>
<section id="using-line-mode-false-with-a-callback-replacement">
<h2>3: Using line_mode=False with a callback replacement.<a class="headerlink" href="#using-line-mode-false-with-a-callback-replacement" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">text2</span> <span class="o">=</span> <span class="s2">&quot;apple banana apple&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tool2</span> <span class="o">=</span> <span class="n">FindReplaceTool</span><span class="p">(</span><span class="n">text2</span><span class="p">,</span> <span class="n">line_mode</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Find all occurrences of &quot;apple&quot; in the continuous text.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">tool2</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;apple&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">_matches</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define a callback that converts each matched text to uppercase.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">to_upper</span><span class="p">(</span><span class="n">match</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">match</span><span class="p">[</span><span class="s2">&quot;matched_text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tool2</span><span class="o">.</span><span class="n">replace_all</span><span class="p">(</span><span class="n">to_upper</span><span class="p">)</span><span class="o">.</span><span class="n">get_modified_text</span><span class="p">()</span>
<span class="go">&#39;APPLE banana APPLE&#39;</span>
</pre></div>
</div>
</section>
<section id="reverting-changes">
<h2>4: Reverting changes.<a class="headerlink" href="#reverting-changes" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">text3</span> <span class="o">=</span> <span class="s2">&quot;one two three&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tool3</span> <span class="o">=</span> <span class="n">FindReplaceTool</span><span class="p">(</span><span class="n">text3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Analyze to match the first word &quot;one&quot; (at the start of the text).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tool3</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^one&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace_one</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;ONE&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_modified_text</span><span class="p">()</span>
<span class="go">&#39;ONE two three&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Revert the edit.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tool3</span><span class="o">.</span><span class="n">revert</span><span class="p">()</span>
<span class="go">&#39;one two three&#39;</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="lkj.strings.FindReplaceTool.analyze">
<span class="sig-name descname"><span class="pre">analyze</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#FindReplaceTool.analyze"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.FindReplaceTool.analyze" title="Link to this definition"></a></dt>
<dd><p>Searches the current text (the last version) for occurrences matching the given
regular expression. Any match data (including group captures) is stored internally.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lkj.strings.FindReplaceTool.find_and_print_matches">
<span class="sig-name descname"><span class="pre">find_and_print_matches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#FindReplaceTool.find_and_print_matches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.FindReplaceTool.find_and_print_matches" title="Link to this definition"></a></dt>
<dd><p>Searches the current text (the last version) for occurrences matching the given
regular expression. Any match data (including group captures) is stored internally.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lkj.strings.FindReplaceTool.find_and_replace">
<span class="sig-name descname"><span class="pre">find_and_replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#FindReplaceTool.find_and_replace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.FindReplaceTool.find_and_replace" title="Link to this definition"></a></dt>
<dd><p>Searches the current text (the last version) for occurrences matching the given
regular expression. Any match data (including group captures) is stored internally.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lkj.strings.FindReplaceTool.get_modified_text">
<span class="sig-name descname"><span class="pre">get_modified_text</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#FindReplaceTool.get_modified_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.FindReplaceTool.get_modified_text" title="Link to this definition"></a></dt>
<dd><p>Returns the current (latest) text version.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lkj.strings.FindReplaceTool.get_original_text">
<span class="sig-name descname"><span class="pre">get_original_text</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#FindReplaceTool.get_original_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.FindReplaceTool.get_original_text" title="Link to this definition"></a></dt>
<dd><p>Returns the original text (first version).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lkj.strings.FindReplaceTool.replace_all">
<span class="sig-name descname"><span class="pre">replace_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">replacement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#FindReplaceTool.replace_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.FindReplaceTool.replace_all" title="Link to this definition"></a></dt>
<dd><p>Replaces all stored matches in the current text version. The ‘replacement’ argument may
be a static string or a callable (see replace_one for details). Replacements are performed
from the last match to the first, so that earlier offsets are not affected.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lkj.strings.FindReplaceTool.replace_one">
<span class="sig-name descname"><span class="pre">replace_one</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">match_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#FindReplaceTool.replace_one"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.FindReplaceTool.replace_one" title="Link to this definition"></a></dt>
<dd><p>Replaces a single match, identified by match_index, with a new string.
The ‘replacement’ argument may be either a static string or a callable.
When it is a callable, it is called with a dictionary containing the match data
(including any captured groups) and should return the replacement string.
The replacement is performed on the current text version, and the new text is
appended as a new version in the history.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lkj.strings.FindReplaceTool.revert">
<span class="sig-name descname"><span class="pre">revert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lkj/strings.html#FindReplaceTool.revert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.FindReplaceTool.revert" title="Link to this definition"></a></dt>
<dd><p>Reverts the current text version by removing the last ‘steps’ versions
from the history. The original text (version 0) is never removed.
Returns the new current text.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;one two three&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tool</span> <span class="o">=</span> <span class="n">FindReplaceTool</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tool</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^one&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace_one</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;ONE&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_modified_text</span><span class="p">()</span>
<span class="go">&#39;ONE two three&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tool</span><span class="o">.</span><span class="n">revert</span><span class="p">()</span>
<span class="go">&#39;one two three&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lkj.strings.FindReplaceTool.view_matches">
<span class="sig-name descname"><span class="pre">view_matches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#FindReplaceTool.view_matches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.FindReplaceTool.view_matches" title="Link to this definition"></a></dt>
<dd><p>Displays all stored matches along with surrounding context. When line_mode
is enabled, the context is provided in full lines with (optionally) line numbers,
and a line is added below the matched line to indicate the matched portion.
In non-line mode, a snippet of characters around the match is shown.</p>
</dd></dl>

</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lkj.strings.camel_to_snake">
<span class="sig-prename descclassname"><span class="pre">lkj.strings.</span></span><span class="sig-name descname"><span class="pre">camel_to_snake</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">camel_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lkj/strings.html#camel_to_snake"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.camel_to_snake" title="Link to this definition"></a></dt>
<dd><p>Convert a CamelCase string to snake_case. Useful for converting class
names to variable names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>camel_string</strong> (<em>str</em>) – The CamelCase string to convert.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The converted snake_case string.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">camel_to_snake</span><span class="p">(</span><span class="s1">&#39;BasicParseTest&#39;</span><span class="p">)</span>
<span class="go">&#39;basic_parse_test&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">camel_to_snake</span><span class="p">(</span><span class="s1">&#39;HTMLParser&#39;</span><span class="p">)</span>
<span class="go">&#39;html_parser&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">camel_to_snake</span><span class="p">(</span><span class="s1">&#39;CamelCaseExample&#39;</span><span class="p">)</span>
<span class="go">&#39;camel_case_example&#39;</span>
</pre></div>
</div>
<p>Note that acronyms are handled correctly:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">camel_to_snake</span><span class="p">(</span><span class="s1">&#39;XMLHttpRequestTest&#39;</span><span class="p">)</span>
<span class="go">&#39;xml_http_request_test&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lkj.strings.fields_of_string_formats">
<span class="sig-prename descclassname"><span class="pre">lkj.strings.</span></span><span class="sig-name descname"><span class="pre">fields_of_string_formats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">templates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregator=&lt;class</span> <span class="pre">'set'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lkj/strings.html#fields_of_string_formats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.fields_of_string_formats" title="Link to this definition"></a></dt>
<dd><p>Extract all unique field names from the templates in _github_url_templates using string.Formatter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>templates</strong> (<em>list</em>) – A list of dictionaries containing ‘template’ keys.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A sorted list of unique field names found in the templates.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">templates</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;</span><span class="si">{this}</span><span class="s1">/and/</span><span class="si">{that}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;and/</span><span class="si">{that}</span><span class="s1">/is/an/</span><span class="si">{other}</span><span class="s1">&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">fields_of_string_formats</span><span class="p">(</span><span class="n">templates</span><span class="p">))</span>
<span class="go">[&#39;other&#39;, &#39;that&#39;, &#39;this&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lkj.strings.indent_lines">
<span class="sig-prename descclassname"><span class="pre">lkj.strings.</span></span><span class="sig-name descname"><span class="pre">indent_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\n'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#indent_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.indent_lines" title="Link to this definition"></a></dt>
<dd><p>Indent each line of a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> – The string to indent.</p></li>
<li><p><strong>indent</strong> – The string to use for indentation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The indented string.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">indent_lines</span><span class="p">(</span><span class="s1">&#39;This is a test.</span><span class="se">\n</span><span class="s1">Another line.&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="mi">8</span><span class="p">))</span>
<span class="go">        This is a test.</span>
<span class="go">        Another line.</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lkj.strings.most_common_indent">
<span class="sig-prename descclassname"><span class="pre">lkj.strings.</span></span><span class="sig-name descname"><span class="pre">most_common_indent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_first_line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#most_common_indent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.most_common_indent" title="Link to this definition"></a></dt>
<dd><p>Find the most common indentation in a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> – The string to analyze.</p></li>
<li><p><strong>ignore_first_line</strong> – Whether to ignore the first line when determining the
indentation. Default is False. One case where you want True is when using python
triple quotes (as in docstrings, for example), since the first line often has
no indentation (from the point of view of the string, in this case.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The most common indentation string.</p>
</dd>
</dl>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">most_common_indent</span><span class="p">(</span><span class="s1">&#39;    This is a test.</span><span class="se">\n</span><span class="s1">    Another line.&#39;</span><span class="p">)</span>
<span class="go">&#39;    &#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lkj.strings.regex_based_substitution">
<span class="sig-prename descclassname"><span class="pre">lkj.strings.</span></span><span class="sig-name descname"><span class="pre">regex_based_substitution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">replacements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lkj/strings.html#regex_based_substitution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.regex_based_substitution" title="Link to this definition"></a></dt>
<dd><p>Construct a substitution function based on an iterable of replacement pairs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>replacements</strong> (<em>iterable</em><em>[</em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>]</em>) – An iterable of (replace_this, with_that) pairs.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A function that, when called with a string, will perform all substitutions.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Callable[[str], str]</p>
</dd>
</dl>
<p>The function is meant to be used with <code class="docutils literal notranslate"><span class="pre">replacements</span></code> as its single input,
returning a <code class="docutils literal notranslate"><span class="pre">substitute</span></code> function that will carry out the substitutions
on an input string.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">replacements</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">:</span> <span class="s1">&#39;grape&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">substitute</span> <span class="o">=</span> <span class="n">regex_based_substitution</span><span class="p">(</span><span class="n">replacements</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">substitute</span><span class="p">(</span><span class="s2">&quot;I like apple and bananas.&quot;</span><span class="p">)</span>
<span class="go">&#39;I like orange and grapes.&#39;</span>
</pre></div>
</div>
<p>You have access to the <code class="docutils literal notranslate"><span class="pre">replacements</span></code> and <code class="docutils literal notranslate"><span class="pre">regex</span></code> attributes of the
<code class="docutils literal notranslate"><span class="pre">substitute</span></code> function. See how the replacements dict has been ordered by
descending length of keys. This is to ensure that longer keys are replaced
before shorter keys, avoiding partial replacements.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">substitute</span><span class="o">.</span><span class="n">replacements</span>
<span class="go">{&#39;banana&#39;: &#39;grape&#39;, &#39;apple&#39;: &#39;orange&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lkj.strings.snake_to_camel">
<span class="sig-prename descclassname"><span class="pre">lkj.strings.</span></span><span class="sig-name descname"><span class="pre">snake_to_camel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">snake_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lkj/strings.html#snake_to_camel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.snake_to_camel" title="Link to this definition"></a></dt>
<dd><p>Convert a snake_case string to CamelCase. Useful for converting variable
names to class names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>snake_string</strong> (<em>str</em>) – The snake_case string to convert.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The converted CamelCase string.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">snake_to_camel</span><span class="p">(</span><span class="s1">&#39;complex_tokenizer&#39;</span><span class="p">)</span>
<span class="go">&#39;ComplexTokenizer&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">snake_to_camel</span><span class="p">(</span><span class="s1">&#39;simple_example_test&#39;</span><span class="p">)</span>
<span class="go">&#39;SimpleExampleTest&#39;</span>
</pre></div>
</div>
<p>Note that acronyms are capitalized correctly:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">snake_to_camel</span><span class="p">(</span><span class="s1">&#39;xml_http_request_test&#39;</span><span class="p">)</span>
<span class="go">&#39;XmlHttpRequestTest&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lkj.strings.truncate_lines">
<span class="sig-prename descclassname"><span class="pre">lkj.strings.</span></span><span class="sig-name descname"><span class="pre">truncate_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bottom_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">middle_marker</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'...'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#truncate_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.truncate_lines" title="Link to this definition"></a></dt>
<dd><p>Truncates a string by limiting the number of lines from the top and bottom.
If the total number of lines is greater than top_limit + bottom_limit,
it keeps the first <cite>top_limit</cite> lines, keeps the last <cite>bottom_limit</cite> lines,
and replaces the omitted middle portion with a single line containing
<cite>middle_marker</cite>.</p>
<p>If top_limit or bottom_limit is None, it is treated as 0.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;Line1</span>
<span class="gp">... </span><span class="s1">Line2</span>
<span class="gp">... </span><span class="s1">Line3</span>
<span class="gp">... </span><span class="s1">Line4</span>
<span class="gp">... </span><span class="s1">Line5</span>
<span class="gp">... </span><span class="s1">Line6&#39;&#39;&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">truncate_lines</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">top_limit</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">bottom_limit</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="go">Line1</span>
<span class="go">Line2</span>
<span class="go">...</span>
<span class="go">Line5</span>
<span class="go">Line6</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lkj.strings.truncate_string">
<span class="sig-prename descclassname"><span class="pre">lkj.strings.</span></span><span class="sig-name descname"><span class="pre">truncate_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">middle_marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'...'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lkj/strings.html#truncate_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.truncate_string" title="Link to this definition"></a></dt>
<dd><p>Truncate a string to a maximum length, inserting a marker in the middle.</p>
<p>If the string is longer than the sum of the left_limit and right_limit,
the string is truncated and the middle_marker is inserted in the middle.</p>
<p>If the string is shorter than the sum of the left_limit and right_limit,
the string is returned as is.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;1234567890&#39;</span><span class="p">)</span>
<span class="go">&#39;1234567890&#39;</span>
</pre></div>
</div>
<p>But if the string is longer than the sum of the limits, it is truncated:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;1234567890&#39;</span><span class="p">,</span> <span class="n">left_limit</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">right_limit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;123...890&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;1234567890&#39;</span><span class="p">,</span> <span class="n">left_limit</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">right_limit</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;123...&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;1234567890&#39;</span><span class="p">,</span> <span class="n">left_limit</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">right_limit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;...890&#39;</span>
</pre></div>
</div>
<p>If you’re using a specific parametrization of the function often, you can
create a partial function with the desired parameters:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">truncate_string</span><span class="p">,</span> <span class="n">left_limit</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">right_limit</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">middle_marker</span><span class="o">=</span><span class="s1">&#39;---&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;1234567890&#39;</span><span class="p">)</span>
<span class="go">&#39;12---90&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;supercalifragilisticexpialidocious&#39;</span><span class="p">)</span>
<span class="go">&#39;su---us&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lkj.strings.truncate_string_with_marker">
<span class="sig-prename descclassname"><span class="pre">lkj.strings.</span></span><span class="sig-name descname"><span class="pre">truncate_string_with_marker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">middle_marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'...'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lkj.strings.truncate_string_with_marker" title="Link to this definition"></a></dt>
<dd><p>Truncate a string to a maximum length, inserting a marker in the middle.</p>
<p>If the string is longer than the sum of the left_limit and right_limit,
the string is truncated and the middle_marker is inserted in the middle.</p>
<p>If the string is shorter than the sum of the left_limit and right_limit,
the string is returned as is.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;1234567890&#39;</span><span class="p">)</span>
<span class="go">&#39;1234567890&#39;</span>
</pre></div>
</div>
<p>But if the string is longer than the sum of the limits, it is truncated:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;1234567890&#39;</span><span class="p">,</span> <span class="n">left_limit</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">right_limit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;123...890&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;1234567890&#39;</span><span class="p">,</span> <span class="n">left_limit</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">right_limit</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;123...&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;1234567890&#39;</span><span class="p">,</span> <span class="n">left_limit</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">right_limit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;...890&#39;</span>
</pre></div>
</div>
<p>If you’re using a specific parametrization of the function often, you can
create a partial function with the desired parameters:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">truncate_string</span><span class="p">,</span> <span class="n">left_limit</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">right_limit</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">middle_marker</span><span class="o">=</span><span class="s1">&#39;---&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;1234567890&#39;</span><span class="p">)</span>
<span class="go">&#39;12---90&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truncate_string</span><span class="p">(</span><span class="s1">&#39;supercalifragilisticexpialidocious&#39;</span><span class="p">)</span>
<span class="go">&#39;su---us&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lkj.strings.unique_affixes">
<span class="sig-prename descclassname"><span class="pre">lkj.strings.</span></span><span class="sig-name descname"><span class="pre">unique_affixes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">items:</span> <span class="pre">~typing.Iterable[~typing.Sequence],</span> <span class="pre">suffix:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">*,</span> <span class="pre">egress:</span> <span class="pre">~typing.Callable</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">ingress:</span> <span class="pre">~typing.Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">identity&gt;</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/lkj/strings.html#unique_affixes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lkj.strings.unique_affixes" title="Link to this definition"></a></dt>
<dd><p>Returns a list of unique prefixes (or suffixes) for the given iterable of sequences.
Raises a ValueError if duplicates are found.</p>
<p>Parameters:
- items: Iterable of sequences (e.g., list of strings).
- suffix: If True, finds unique suffixes instead of prefixes.
- ingress: Callable to preprocess each item. Default is identity function.
- egress: Callable to postprocess each affix. Default is appropriate function based on item type.</p>
<blockquote>
<div><p>Usually, ingress and egress are inverses of each other.</p>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unique_affixes</span><span class="p">([</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;ape&#39;</span><span class="p">,</span> <span class="s1">&#39;apricot&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;band&#39;</span><span class="p">,</span> <span class="s1">&#39;bandana&#39;</span><span class="p">])</span>
<span class="go">[&#39;app&#39;, &#39;ape&#39;, &#39;apr&#39;, &#39;bana&#39;, &#39;band&#39;, &#39;banda&#39;]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unique_affixes</span><span class="p">([</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;testing&#39;</span><span class="p">,</span> <span class="s1">&#39;tester&#39;</span><span class="p">])</span>
<span class="go">[&#39;test&#39;, &#39;testi&#39;, &#39;teste&#39;]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unique_affixes</span><span class="p">([</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">])</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Duplicate item detected: test</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unique_affixes</span><span class="p">([</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;abcd&#39;</span><span class="p">,</span> <span class="s1">&#39;abcde&#39;</span><span class="p">])</span>
<span class="go">[&#39;abc&#39;, &#39;abcd&#39;, &#39;abcde&#39;]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unique_affixes</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unique_affixes</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="s1">&#39;xyz&#39;</span><span class="p">])</span>
<span class="go">[&#39;x&#39;, &#39;xy&#39;, &#39;xyz&#39;]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unique_affixes</span><span class="p">([</span><span class="s1">&#39;can&#39;</span><span class="p">,</span> <span class="s1">&#39;candy&#39;</span><span class="p">,</span> <span class="s1">&#39;candle&#39;</span><span class="p">])</span>
<span class="go">[&#39;can&#39;, &#39;candy&#39;, &#39;candl&#39;]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unique_affixes</span><span class="p">([</span><span class="s1">&#39;flow&#39;</span><span class="p">,</span> <span class="s1">&#39;flower&#39;</span><span class="p">,</span> <span class="s1">&#39;flight&#39;</span><span class="p">])</span>
<span class="go">[&#39;flow&#39;, &#39;flowe&#39;, &#39;fli&#39;]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unique_affixes</span><span class="p">([</span><span class="s1">&#39;ation&#39;</span><span class="p">,</span> <span class="s1">&#39;termination&#39;</span><span class="p">,</span> <span class="s1">&#39;examination&#39;</span><span class="p">],</span> <span class="n">suffix</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[&#39;ation&#39;, &#39;rmination&#39;, &#39;amination&#39;]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">functools</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ingress</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">egress</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;here.and.there&#39;</span><span class="p">,</span> <span class="s1">&#39;here.or.there&#39;</span><span class="p">,</span> <span class="s1">&#39;here&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unique_affixes</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">ingress</span><span class="p">,</span> <span class="n">egress</span><span class="o">=</span><span class="n">egress</span><span class="p">)</span>
<span class="go">[&#39;here.and&#39;, &#39;here.or&#39;, &#39;here&#39;]</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="misc.html" class="btn btn-neutral float-left" title="lkj.misc" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright NO COPYRIGHT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>